{% extends 'base.html' %} {% block title %} Image Builder {% endblock %} {% block head %} {{ super() }} {% endblock %} {%block content %}
<link href="{{url_for('static', filename='css/details_page.css')}}" rel="stylesheet"> 
<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4 py-1 position-relative">
    <div class="site-content">
        <div class="row titlebar p-3">
            <div class="d-flex p-2 justify-content-between align-items-center">
                <h4 class="m-2">Image Bulider</h4>
            </div>
        </div>
        <div class="page d-flex flex-column p-3">
            <form action="/images/build" method="POST" enctype="multipart/form-data">
                <div class="page-body d-flex flex-wrap p-2">
                    <div class="d-flex w-100">
                        <div id="dockerfile-content" class="bg-light w-100">
                            <div class="tabs bg-dark shadow-sm d-flex w-100 p-0 m-0">
                                <button id="btnToggleFile" class="btn btn-sm rounded-0 btn-primary" onclick="toggleDockerfileUpload('file')">Upload file</button>
                                <button id="btnTogglePath" class="btn btn-sm rounded-0 bg-light" onclick="toggleDockerfileUpload('path')">Use path</button>
                            </div>
                            <div class="tabs-content p-2">
                                <div id="file-tab" class="">
                                    <div class="form-group">
                                        <label for="fileInput">File input...</label>
                                        <input type="file" class="form-control-file" id="fileInput" name="file" accept=".tar.gz,.zip">
                                    </div>
                                    <div class="input-group-sm m-2 d-flex align-items-center p-2 w-25 bg-light shadow-sm">
                                        <input id="chkCustomContext" class="mr-1" name="chkCustomContext" type="checkbox">
                                        <label class="m-0 p-0" for="chkCustomContext">Custom context?</label>
                                    </div>
                                    <input id="customContext" name="customContext" class="form-control d-none" type="text" placeholder="Custom context path(Optional)">
                                </div>
                                <div id="path-tab" class="d-none">
                                    <div class="p-2 d-flex flex-column">
                                        <input id="dockerfileDirectory" name="dockerfileDirectory" type="text" class="form-control w-50" placeholder="Dockerfile path"> Or
                                        <button class="btn btn-sm btn-primary w-25">Make a dockerfile</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- STRS -->
                    <div class="d-flex flex-wrap">
                        <div class="input-group-sm m-2 p-2 shadow-sm bg-light">
                            <label for="path">Path to directory containing dockerfile(Context):</label>
                            <input autocomplete="off" id="path" name="path" type="text" placeholder="Directory path" class="form-control">
                        </div>
                        <div class="input-group-sm m-2 p-2 shadow-sm bg-light">
                            <label for="tag">Tag:</label>
                            <input autocomplete="off" id="tag" name="tag" type="text" placeholder="Tag" class="form-control" pattern="[\w_-]+$" oninput="setCustomValidity('')">
                        </div>
                        <div class="input-group-sm m-2 p-2 shadow-sm bg-light">
                            <label for="enconding">Encoding:</label>
                            <input autocomplete="off" id="enconding" name="enconding" type="text" placeholder="Encoding" class="form-control" pattern="[\w_-]+$" oninput="setCustomValidity('')">
                        </div>
                        <div class="input-group-sm m-2 p-2 shadow-sm bg-light">
                            <label for="dockerile">Dockerfile path:</label>
                            <input autocomplete="off" id="dockerfile" name="dockerfile" type="text" placeholder="Docker file path within the build context" class="form-control" pattern="[\w_-]+$" oninput="setCustomValidity('')">
                        </div>
                        <div class="input-group-sm m-2 p-2 shadow-sm bg-light">
                            <label for="network-mode">Network Mode:</label>
                            <input autocomplete="off" id="networkMode" name="networkMode" type="text" placeholder="Network mode" class="form-control" pattern="[\w_-]+$" oninput="setCustomValidity('')">
                        </div>
                        <div class="input-group-sm m-2 p-2 shadow-sm bg-light">
                            <label for="platform">Platform:</label>
                            <input autocomplete="off" id="Platform" name="Platform" type="text" placeholder="Platform" class="form-control" pattern="[\w_-]+$" oninput="setCustomValidity('')">
                        </div>
                        <div class="input-group-sm m-2 p-2 shadow-sm bg-light">
                            <label for="isolation">Isolation:</label>
                            <input autocomplete="off" id="isolation" name="isolation" type="text" placeholder="Isolation" class="form-control" pattern="[\w_-]+$" oninput="setCustomValidity('')">
                        </div>
                    </div>
                    <!-- NUMBERS -->
                    <div class="d-flex flex-wrap">
                        <div class="input-group-sm m-2 p-2 shadow-sm bg-light">
                            <label for="timeout">Timeout: </label>
                            <input autocomplete="off" id="timeout" name="timeout" type="number" placeholder="Time out" class="form-control">
                        </div>
                        <div class="input-group-sm m-2 p-2 shadow-sm bg-light">
                            <label for="shmsize">SHM Size: </label>
                            <input autocomplete="off" id="shmsize" name="shmsize" type="number" placeholder="SHM Size" class="form-control">
                        </div>
                    </div>
                    <!-- LISTS -->
                    <div class="d-flex flex-wrap">
                        <div class="input-group-sm m-2 p-2 shadow-sm bg-light">
                            <div class="d-flex justify-content-between align-items-center">
                                <label class="py-0 my-0" for="volumes">Volumes:</label>
                                <button onclick="showListModal('volumes')" class="btn btn-sm btn-primary my-1" >add</button>
                            </div>
                            <input autocomplete="off" id="volumes" name="volumes" type="text" placeholder="Volumes" class="form-control" readonly>
                        </div>
                    </div>
                    <!-- DICTS -->
                    <div class="d-flex flex-wrap">
                        <div class="input-group-sm m-2">
                            <div class="d-flex justify-content-between align-items-center">
                                <label class="py-0 my-0" for="ports">Ports binds:</label>
                                <button onclick="showDictionaryModal('ports')" class="btn btn-sm btn-primary my-1" >add</button>
                            </div>
                            <input autocomplete="off" id="ports" name="ports" type="text" placeholder="Ports" class="form-control" readonly oninput="setCustomValidity('')">
                        </div>
                    </div>
                    <!-- BOOLS -->
                    <div class="d-flex flex-wrap">
                        <div class="input-group-sm m-2 d-flex align-items-center p-2 bg-light shadow-sm">
                            <input class="mr-1" autocomplete="off" id="chkTty" name="chkTty" type="checkbox">
                            <label class="m-0 p-0" for="chkTty" class="ml-1 mb-0 mr-2">Enable tty?</label>
                        </div>
                        <div class="input-group-sm m-2 d-flex align-items-center p-2 bg-light shadow-sm">
                            <input class="mr-1" id="quiet" name="quiet" type="checkbox">
                            <label class="m-0 p-0" for="quiet">Quiet?</label>
                        </div>
                        <div class="input-group-sm m-2 d-flex align-items-center p-2 bg-light shadow-sm">
                            <input class="mr-1" id="noCache" name="noCache" type="checkbox">
                            <label class="m-0 p-0" for="noCache">No Cache?</label>
                        </div>
                        <div class="input-group-sm m-2 d-flex align-items-center p-2 bg-light shadow-sm">
                            <input class="mr-1" id="rm" name="rm" type="checkbox">
                            <label class="m-0 p-0" for="rm">Remove intermediate containers?</label>
                        </div>
                        <div class="input-group-sm m-2 d-flex align-items-center p-2 bg-light shadow-sm">
                            <input class="mr-1" id="forceRm" name="forceRm" type="checkbox">
                            <label class="m-0 p-0" for="forceRm">Force remove intermediate containers?</label>
                        </div>
                        <div class="input-group-sm m-2 d-flex align-items-center p-2 bg-light shadow-sm">
                            <input class="mr-1" id="pull" name="pull" type="checkbox">
                            <label class="m-0 p-0" for="pull">Pull updates?</label>
                        </div>
                        <div class="input-group-sm m-2 d-flex align-items-center p-2 bg-light shadow-sm">
                            <input class="mr-1" id="squash" name="squash" type="checkbox">
                            <label class="m-0 p-0" for="squash">Squash?</label>
                        </div>
                        <div class="input-group-sm m-2 d-flex align-items-center p-2 bg-light shadow-sm">
                            <input class="mr-1" id="useConfigProxy" name="useConfigProxy" type="checkbox">
                            <label class="m-0 p-0" for="useConfigProxy">Use config proxy?</label>
                        </div>
                    </div>
                </div>
                <div class="fixed-bottom bg-primary w-100 text-white page-footer d-flex flex-row justify-content-end align-items-center px-5">
                    <input type="submit" class="btn btn-sm btn-success m-1">
                </div>
            </form>
        </div>
        <script src="{{url_for('static', filename='js/image_builder.js')}}"></script>
    </div>
</main>
{% endblock %} {% block footer %} {{ super() }} {% endblock %}
